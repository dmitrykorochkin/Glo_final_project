(()=>{"use strict";(()=>{const e=document.getElementById("callback"),t=document.querySelectorAll(".callback-btn"),n=document.querySelector(".modal-overlay"),o=t=>{const o=t.target;(o.matches(".modal-overlay")||o.closest(".modal-close"))&&(n.style.display="none",e.style.display="none")},l=t=>{t.preventDefault(),(({timing:e,draw:t,duration:n})=>{let o=performance.now();requestAnimationFrame((function l(r){let s=(r-o)/n;s>1&&(s=1);let a=e(s);t(a),s<1&&requestAnimationFrame(l)}))})({duration:700,timing:e=>e,draw(t){e.style.opacity=t,n.style.display="block",e.style.display="block"}}),n.style.display="block",e.style.display="block",document.body.addEventListener("click",o)};t.forEach((e=>{e.addEventListener("click",l)}))})(),(()=>{const e=document.querySelectorAll('a[href^="#"]'),t=document.querySelector(".up"),n=document.querySelector(".logo");for(const t of e)t.addEventListener("click",(e=>{e.preventDefault();const n=t.hasAttribute("href")?t.getAttribute("href"):"body";document.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"})}));t.addEventListener("click",(()=>window.scroll(0,0))),window.addEventListener("scroll",(function(){const e=document.getElementById("services"),n=document.documentElement.scrollTop,o=e.getBoundingClientRect().top;Math.abs(o)<=n?t.style.display="block":t.style.display="none"})),n.addEventListener("click",(e=>{e.preventDefault(),window.scroll(0,0)}))})(),function(e,t="+7 (__)___-__-__"){const n=document.querySelectorAll(e);function o(e){const n=e.keyCode,o=t,l=o.replace(/\D/g,""),r=this.value.replace(/\D/g,"");console.log(o);let s=0,a=o.replace(/[_\d]/g,(function(e){return s<r.length?r.charAt(s++)||l.charAt(s):e}));s=a.indexOf("_"),-1!=s&&(a=a.slice(0,s));let c=o.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");c=new RegExp("^"+c+"$"),(!c.test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=a),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of n)e.addEventListener("input",o),e.addEventListener("focus",o),e.addEventListener("blur",o)}(),(()=>{const e=document.querySelector("form"),t=e.querySelectorAll("input[type='text']"),n=e.querySelector("input[name='fio']"),o=e.querySelector("input[name='tel']"),l=/[^а-яА-я- ]/,r=/[^\d+]/,s="Что-то пошло не так...";let a,c;n.addEventListener("input",(e=>{e.target.value=e.target.value.replace(l,""),n.classList.remove("error"),a=n.value})),o.addEventListener("input",(e=>{e.target.value=e.target.value.replace(r,""),o.classList.remove("error"),c=o.value}));try{e.addEventListener("submit",(l=>{l.preventDefault(),/^([А-Яа-я]{1}[А-Яа-я ]{1,})$/.test(String(a))||n.classList.add("error"),/^([\+]{0,1}[\d]{6,16})$/.test(String(c))||o.classList.add("error");const r=document.createElement("div");r.classList.add("status"),e.append(r);const i=new FormData(e),d={};i.forEach(((e,t)=>{d[t]=e})),n.classList.contains("error")||o.classList.contains("error")?(r.textContent=s,setTimeout((()=>{r.remove()}),1500)):(async(e,t)=>{document.querySelector(".status").textContent="Зарузка...";let n=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});return await n.json()})(0,d).then((e=>{r.textContent="Спасибо! С вами свяжутся!"})).catch((e=>{r.textContent=s})).finally((()=>{t.forEach((e=>{e.value=""})),setTimeout((()=>{r.remove()}),1500)}))}))}catch(e){console.log(e.message)}})()})();